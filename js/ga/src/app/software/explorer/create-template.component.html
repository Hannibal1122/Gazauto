<div *ngIf = "_open" style = "position:absolute; width:100%; height:100%; background: rgba(255, 255, 255, 0.35); top:0px; left: 0px;">
    <div class = "mainPanel" [class.open-modal] = "animationOpen" (transitionend) = "animationCloseModal()">
        <div>
            Объект класса '{{ name }}'
        </div>
        <div style = "height: 330px; border:1px solid #eeeeee; margin-top:5px; padding: 3px; overflow: auto;">
            <ng-container *ngFor = "let list of mainList; let i = index;" >
                <div *ngIf = "!list.hide" 
                    class = "listClass" 
                    [style.margin-left] = "list.level * 10 + 'px'">
                    <button class = "mainButton" 
                        style = "width:24px; height: 24px; font-size:12px; min-width: 24px;" 
                        [disabled] = "!list.globalId"
                        (click) = "setCutElement(i)"><i class="fas fa-cut"></i></button>
                    <button class = "mainButton" 
                        style = "width:24px; height: 24px; font-size:12px; min-width: 24px; margin-left: 5px;" 
                        [disabled] = "cutElement == -1 || !list.globalId"
                        (click) = "pasteCutElement(i)"><i class="fas fa-paste"></i></button>
                    <span style = "cursor: pointer; position:relative;" (click) = "openCollapse(i)">
                        <i class="fas fa-table colorIconTable"></i>
                        <span *ngIf = "list.end !== true" style = "position: absolute; font-size: 12px; bottom: -9px; left: -3px;"><i class="fas fa-ellipsis-h colorIconTable"></i></span>
                    </span> 
                    <select class = "mainSelect" [(ngModel)] = "list.templateTreeId" (change) = "onChangeTemplate(i)" [disabled] = "!list.edited || list.globalId">
                        <option *ngFor = "let o of listTemplateById[list.templateParentId]" [attr.value] = "o.id">{{ o.templateName }}</option>
                    </select>

                    <input *ngIf = "!list.globalId" class = "mainSelect" type="text" [(ngModel)] = "list.name" (change) = "onChangeName(i)" placeholder="имя">
                    <span *ngIf = "list.globalId">{{ list.name }}</span>
                    <span *ngIf = "list.state" 
                        style = "font-size:12px; font-weight: 600; border-radius: 8px; padding: 2px 3px;"
                        [class.tableCellStateRed] = "list.state < 50"
                        [class.tableCellStateYellow] = "list.state >= 50 && list.state < 100"
                        [class.tableCellStateGreen] = "list.state == 100">
                        {{ list.state }}%</span>
                    <ng-container *ngIf = "i > 0">
                        <span class = "caretRemove" (click) = "removeItem(i)" [class.caretDisabled] = "!list.edited"><i class="fas fa-minus-circle"></i></span>
                    </ng-container>
                    <span *ngIf = "!list.last" class = "caretAppend" (click) = "appendNode(i)" [class.caretDisabled] = "!list.edited"> <i class="fas fa-plus-circle"></i></span>
                </div>
            </ng-container>

        </div>
        <div style = "text-align: right;">
            <span *ngIf = "error != ''" style = "float: left; color:rgb(224, 59, 59); max-width: 360px; text-align: left;">{{ error }}</span>
            <button class = "propertyBtn" (click) = "Cancel()">Отмена</button>
            <button class = "propertyBtn" (click) = "Create()" style = "width:85px;">
                <span *ngIf = "!loaded"><i class="fas fa-spinner spinnerLoader"></i></span>
                <span *ngIf = "loaded">{{ settings.new !== false ? 'Создать' : 'Изменить' }}</span>
            </button>
        </div>
    </div>
</div>